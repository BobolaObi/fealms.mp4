:root{
  --bg:#141414; --panel:#1c1c1c; --panel-2:#202020; --line:#2a2a2a;
  --fg:#eaeaea; --muted:#9aa0a6; --accent:#4fc3f7; --blue:#64b5f6; --green:#66bb6a; --red:#ef5350;
  --select:#ffca28;
  --radius:10px; --shadow:0 8px 28px rgba(0,0,0,.35);
  --viewer-h: 220px; /* row height for viewer */
  --left-w: 280px;   /* sidebar width */
}

*{box-sizing:border-box}
html,body{height:100%; background:var(--bg); color:var(--fg); margin:0; font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}

/* App grid */
.app{
  display:grid;
  /* Adjustable viewer height and sidebar width */
  grid-template-rows: 40px var(--viewer-h) 1fr;
  grid-template-columns: var(--left-w) 6px 1fr;
  grid-template-areas:
    "menubar menubar menubar"
    "left    resize  monitors"
    "left    resize  timeline";
  height:100vh;
}

.menubar{grid-area:menubar; background:#0f0f0f; border-bottom:1px solid var(--line); display:flex; align-items:center; gap:12px; padding:0 12px;}
.brand{font-weight:700; letter-spacing:.2px}
.menu-btn{border:0; background:transparent; color:var(--muted); padding:6px 8px; border-radius:8px;}
.menu-btn:hover{background:#1a1a1a; color:var(--fg)}
.menubar .spacer{flex:1}
.chip{background:#232323; border:1px solid #2e2e2e; padding:3px 8px; border-radius:999px; color:var(--muted)}

/* Left: Project */
.left{grid-area:left; display:flex; flex-direction:column; background:var(--panel); border-right:1px solid var(--line); min-width:160px}
.panel{flex:1; overflow:auto}
.panel h4{margin:10px; color:var(--muted); font-weight:600}
.project-tools{display:flex; gap:8px; padding:8px; border-bottom:1px solid var(--line)}
.btn{border:1px solid #2e2e2e; background:#222; color:#ddd; padding:6px 10px; border-radius:8px; cursor:pointer}
.btn:hover{background:#2a2a2a}
.dropzone{margin:10px; padding:14px; border:1px dashed #3a3a3a; border-radius:10px; text-align:center; color:var(--muted)}
.media-list{display:grid; grid-template-columns:repeat(2,1fr); gap:8px; padding:10px}
.media{border:1px solid #2d2d2d; border-radius:10px; overflow:hidden; background:#181818; cursor:grab}
.media .thumb{height:72px; background:#101010; display:grid; place-items:center; color:#888; font-size:12px}
.media .meta{padding:8px; font-size:12px; color:#c9d0d5}

/* Monitors */
.monitors{grid-area:monitors; position:relative; display:flex; flex-direction:column; gap:8px; padding:8px; background:var(--panel); border-right:1px solid var(--line)}
.row-resizer{position:absolute; left:0; right:0; bottom:-5px; height:10px; cursor:ns-resize}
.row-resizer::after{content:""; position:absolute; left:20%; right:20%; top:2px; height:6px; border-radius:999px; background:#2a2a2a; box-shadow:0 0 0 1px #0006}
.row-resizer:hover::after{background:#3a3a3a}
.col-resizer{grid-area:resize; cursor:ew-resize; position:relative}
.col-resizer::before{content:""; position:absolute; top:0; bottom:0; left:50%; width:2px; transform:translateX(-1px); background:#222}
.col-resizer:hover::before{background:#2f2f2f}
.monitor{flex:1; min-height:0}
.monitor{background:var(--panel-2); border:1px solid var(--line); border-radius:10px; overflow:hidden; display:flex; flex-direction:column}
.monitor header{padding:8px 10px; color:var(--muted); border-bottom:1px solid var(--line); display:flex; gap:8px; align-items:center}
.monitor .screen{flex:1; display:grid; place-items:center; background:#0d0d0d}
.monitor .screen video, .monitor .screen canvas{max-width:100%; max-height:100%; background:#000}
.transport{display:flex; gap:6px; padding:8px; border-top:1px solid var(--line); align-items:center}
.icon-btn{border:0; background:#272727; color:#e0e0e0; padding:6px 10px; border-radius:8px; cursor:pointer}
.icon-btn:hover{background:#333}
.timecode{margin-left:auto; color:#9aa0a6; font-variant-numeric:tabular-nums}

/* Timeline */
.timeline{grid-area:timeline; display:grid; grid-template-rows: 36px 40px 1fr 40px; background:var(--panel-2); border-top:1px solid var(--line)}
.timeline-top{display:flex; align-items:center; gap:8px; padding:6px 10px; border-bottom:1px solid var(--line)}
.tool-group{display:flex; align-items:center; gap:6px; margin-right:12px;}
.tool-btn{border:1px solid #2d2d2d; background:#1e1e1e; color:#c9d0d5; padding:4px 10px; border-radius:6px; cursor:pointer; font-size:13px; transition:background .2s, color .2s, border-color .2s}
.tool-btn:hover{background:#2a2a2a; color:#fff}
.tool-btn.active{background:var(--accent); border-color:var(--accent); color:#101010}
.zoom{display:flex; align-items:center; gap:6px; color:var(--muted)}
.ruler-wrap{position:relative; height:40px; border-bottom:1px solid var(--line); background:#101010}
#ruler{position:absolute; inset:0}
.tracks{position:relative; overflow:auto; background:#161616}
.track{position:relative; border-bottom:1px solid #2a2a2a; height:120px}
.track .label{position:absolute; left:0; top:0; bottom:0; width:54px; background:#0f0f0f; border-right:1px solid #262626; display:grid; place-items:center; color:#c0c7cd; font-weight:600}
.lane{position:absolute; left:54px; right:0; top:0; bottom:0}
.track:nth-child(odd) .lane{background:#171717}
.track:nth-child(even) .lane{background:#1a1a1a}
.clip{position:absolute; height:84px; top:18px; border-radius:8px; border:1px solid rgba(255,255,255,.12); display:flex; align-items:center; padding:0 12px; color:#fff; cursor:grab; box-shadow: inset 0 0 0 1px rgba(255,255,255,.05)}
.clip.video{background:linear-gradient(180deg, rgba(67,94,190,.9), rgba(50,70,150,.9))}
.clip.image{background:linear-gradient(180deg, rgba(81,61,50,.9), rgba(60,45,36,.9))}
.clip.audio{background:linear-gradient(180deg, rgba(0,160,140,.9), rgba(0,120,110,.9))}
.clip .handles{position:absolute; inset:0; display:flex; justify-content:space-between; pointer-events:none}
.clip .h{width:8px; background:rgba(255,255,255,.25); border-radius:6px; pointer-events:auto; cursor:ew-resize}
.clip.selected{outline:2px solid var(--select)}
.clip small{opacity:.92; font-size:13px; font-weight:600}
.playhead{position:absolute; top:0; bottom:0; width:3px; background:var(--red); pointer-events:none; z-index:10; box-shadow:0 0 0 1px rgba(0,0,0,.4)}
.playhead::after{content:""; position:absolute; top:0; left:-6px; width:14px; height:14px; background:var(--red); clip-path:polygon(0 0,100% 0,50% 100%); filter:drop-shadow(0 1px 1px rgba(0,0,0,.5))}
.snapline{position:absolute; top:0; bottom:0; width:1px; background:#ffffff33; pointer-events:none}

.app[data-tool="blade"] .tracks,
.app[data-tool="blade"] .track .lane,
.app[data-tool="blade"] .clip{cursor:crosshair}

.footer{display:flex; align-items:center; gap:8px; padding:6px 10px; border-top:1px solid var(--line); color:var(--muted)}

/* Empty timeline overlay */
.tracks[data-empty="1"]::after{
  content:"Drop clips here";
  position:absolute; left:54px; right:0; top:25%; text-align:center; color:#c9d0d5; opacity:.7;
  border:1px dashed #3a3a3a; border-radius:10px; padding:16px; margin:0 20%;
}

/* Hide default file inputs */
input[type=file]{display:none}

.kbd{background:#2b2b2b; border:1px solid #3a3a3a; padding:1px 6px; border-radius:6px; font-size:12px; color:#c9d0d5}

/* Scrollbars */
::-webkit-scrollbar{height:10px;width:10px}
::-webkit-scrollbar-thumb{background:#2b2b2b;border-radius:6px}
::-webkit-scrollbar-track{background:#141414}

/* Cheat sheet overlay */
.cheatsheet{position:fixed; inset:0; background:rgba(0,0,0,0.65); display:none; align-items:center; justify-content:center; padding:24px; z-index:200;}
.cheatsheet.visible{display:flex;}
.cheatsheet-panel{background:var(--panel); border:1px solid var(--line); border-radius:14px; width:min(720px, 100%); max-height:90vh; display:flex; flex-direction:column; box-shadow:var(--shadow);}
.cheatsheet-panel header{display:flex; align-items:center; justify-content:space-between; padding:16px 20px; border-bottom:1px solid var(--line);}
.cheatsheet-panel h2{margin:0; font-size:18px; font-weight:600; letter-spacing:.4px;}
.cheatsheet .icon-btn{background:#2b2b2b;}
.cheatsheet-content{padding:18px 20px 24px; overflow:auto; display:flex; flex-direction:column; gap:18px;}
.cs-section h3{margin:0 0 8px; font-size:13px; text-transform:uppercase; letter-spacing:.6px; color:var(--muted);}
.cs-section ol{margin:0; padding-left:18px; display:grid; gap:6px;}
.cs-grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(220px,1fr)); gap:10px 14px;}
.cs-grid-item{display:flex; align-items:center; gap:8px;}
.cs-key{background:#242424; border:1px solid #343434; border-radius:8px; padding:2px 8px; font-size:12px; font-family:"JetBrains Mono", "SFMono-Regular", ui-monospace, monospace;}
.cs-list{margin:0; padding-left:18px; color:var(--fg); display:grid; gap:6px;}
